# Vercel 배포 가이드

이 문서는 진료 대기 시스템을 Vercel에 배포하는 방법을 설명합니다.

## 사전 준비

1. **GitHub 저장소 준비**

   - 프로젝트를 GitHub에 푸시합니다
   - `lib/firebase.config.ts`는 `.gitignore`에 포함되어 있으므로 커밋되지 않습니다

2. **Vercel 계정 생성**
   - [Vercel](https://vercel.com)에 가입합니다
   - GitHub 계정으로 로그인합니다

## 배포 단계

### 1. Vercel 프로젝트 생성

1. Vercel 대시보드에서 **"New Project"** 클릭
2. GitHub 저장소 선택
3. 프로젝트 설정:
   - **Framework Preset**: Vite (자동 감지됨)
   - **Root Directory**: `./` (기본값)
   - **Build Command**: `npm run build` (기본값)
   - **Output Directory**: `dist` (기본값)

### 2. 환경 변수 설정

Vercel 프로젝트 설정에서 **"Environment Variables"** 섹션으로 이동하여 다음 환경 변수를 추가합니다:

| 변수명                              | 값                                                                                 | 설명                         |
| ----------------------------------- | ---------------------------------------------------------------------------------- | ---------------------------- |
| `VITE_FIREBASE_API_KEY`             | `AIzaSyBsyc84i0XBIxa1qhHNJxZvATCeWR5_0oI`                                          | Firebase API Key             |
| `VITE_FIREBASE_AUTH_DOMAIN`         | `clinic-waiting-system.firebaseapp.com`                                            | Firebase Auth Domain         |
| `VITE_FIREBASE_DATABASE_URL`        | `https://clinic-waiting-system-default-rtdb.asia-southeast1.firebasedatabase.app/` | Firebase Database URL        |
| `VITE_FIREBASE_PROJECT_ID`          | `clinic-waiting-system`                                                            | Firebase Project ID          |
| `VITE_FIREBASE_STORAGE_BUCKET`      | `clinic-waiting-system.firebasestorage.app`                                        | Firebase Storage Bucket      |
| `VITE_FIREBASE_MESSAGING_SENDER_ID` | `246652260620`                                                                     | Firebase Messaging Sender ID |
| `VITE_FIREBASE_APP_ID`              | `1:246652260620:web:1f6f4d2b72ec1d13923929`                                        | Firebase App ID              |

**중요**: 각 환경 변수에 대해 다음 환경을 선택합니다:

- ✅ Production
- ✅ Preview
- ✅ Development

### 3. 배포 실행

환경 변수를 설정한 후 **"Deploy"** 버튼을 클릭합니다.

Vercel이 자동으로:

1. 의존성 설치 (`npm install`)
2. 빌드 실행 (`npm run build`)
3. 배포 완료

### 4. 배포 확인

배포가 완료되면:

- Vercel이 자동으로 생성한 URL로 접속하여 앱이 정상 작동하는지 확인합니다
- 예: `https://clinic-waiting-system.vercel.app`

## 자동 배포 설정

GitHub 저장소와 연결하면:

- `main` 브랜치에 푸시할 때마다 자동으로 Production 배포
- 다른 브랜치에 푸시할 때마다 Preview 배포

## 커스텀 도메인 설정 (선택사항)

1. Vercel 프로젝트 설정에서 **"Domains"** 섹션으로 이동
2. 원하는 도메인 입력
3. DNS 설정 안내에 따라 도메인을 연결

## 문제 해결

### 빌드 실패

- **에러**: `Cannot find module 'firebase.config'`
  - **해결**: 환경 변수가 제대로 설정되었는지 확인
  - Vercel 대시보드에서 환경 변수가 모든 환경(Production, Preview, Development)에 설정되어 있는지 확인

### Firebase 연결 실패

- **에러**: Firebase 초기화 실패
  - **해결**:
    1. Firebase Console에서 Realtime Database 규칙 확인
    2. 환경 변수 값이 정확한지 확인
    3. Firebase 프로젝트의 API 키가 활성화되어 있는지 확인

### 라우팅 문제

- **에러**: 새로고침 시 404 에러
  - **해결**: `vercel.json` 파일의 `rewrites` 설정이 올바르게 적용되었는지 확인

## 추가 리소스

- [Vercel 공식 문서](https://vercel.com/docs)
- [Vite + Vercel 가이드](https://vercel.com/guides/deploying-vite)
- [Firebase 스키마 문서](./파이어베이스_스키마.md)

